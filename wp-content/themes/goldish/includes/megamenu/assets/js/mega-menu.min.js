!function(d){d(function(){"use strict";function e(){d(".ip-field-custom--active").removeClass("ip-field-custom--active"),d(".menu-item-depth-0 .ip-field-custom--depth-0").addClass("ip-field-custom--active");var e=d("input[id^=locations-primary]:checked").length,i=d("input[id^=locations-mobile]:checked").length;e||i?d(".ip-field-custom__option-html-block").prop("disabled",!1):d(".ip-field-custom__option-html-block").prop("disabled",!0),(e||i)&&d(".menu-item-depth-0 .ip-field-custom--primary-0").addClass("ip-field-custom--active"),(e||i)&&d(".menu-item:not(.menu-item-depth-0) .ip-field-custom--primary-not-0").addClass("ip-field-custom--active"),d(".ip-field-custom--badge_color.ip-field-custom--active:not(.ip-field-custom--hidden) .ip-field-custom__badge_color:not(.init)").addClass("init").wpColorPicker(),i&&!e&&d(".ip-field-custom--columns").removeClass("ip-field-custom--active")}e(),d('.menu-settings [name^="menu-locations"]').on("click",e);function i(){d(".menu-item-depth-0 .ip-field-custom__content").each(function(){var e=d(this),i=e.val(),e=e.closest(".menu-item");d(".ip-field-custom--html_block,.ip-field-custom--product_category,.ip-field-custom--product_attr",e).removeClass("active"),d(".ip-field-custom--"+i,e).addClass("active")})}i(),d(document).on("sortstop menu-item-added",function(){setTimeout(e,100)}).on("change",".ip-field-custom__content",i).on("click",".ip-field-custom__badge_add",function(e){e.preventDefault();var i=d(this),e=i.closest(".menu-item-settings");e.find(".ip-field-custom--badge_text, .ip-field-custom--badge_color").removeClass("ip-field-custom--hidden"),d(".ip-field-custom__badge_color:not(.init)",e).addClass("init").wpColorPicker(),i.remove()}).on("click",".ip-field-custom__loader",function(e){e.preventDefault();var i=d(this).closest(".ip-field-custom"),t=i.find(".spinner");if(i.hasClass("loaded"))return!1;if(t.hasClass("is-active"))return!1;t.addClass("is-active");var s=i.find(".ip-field-custom__val"),o=s.val(),c=i.data("type"),e=i.data("item-id"),l=i.find(".ip-field-custom__container"),a=i.find(".ip-field-custom__loader");return d.ajax({url:ajaxurl,type:"POST",data:{action:"ideapark_load_mega_menu",value:o,type:c,item_id:e},success:function(e){"icon"==c?(l.html(e),l.find(".ip-field-custom__icon-select").select2({placeholder:ideapark_wp_vars_mega_menu.placeholderIcon,allowClear:!0,templateResult:function(e){return e.id?d('<span><span class="ip-field-custom__option-ico '+e.id+'"></span> '+e.text+"</span>"):e.text}}).on("select2:select select2:clear select2:unselect",function(e){var i=e.params.data;"select2:unselect"===e.type||"select2:unselect"===e.type?(a.html(""),s.val("")):(a.html(i.id?'<span class="ip-field-custom__icon '+i.id+'"></span>':""),s.val(i.id))})):a.replaceWith(e),i.addClass("loaded")}}).always(function(){t.removeClass("is-active")}),!1})})}(jQuery);